<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Smart Phone Store</title>

    <script src="./product_data.js" type="text/javascript"></script> 

    <link href="style_home.css" rel="stylesheet">
    <script>
        var store_name = "Zachary Matsudo";

    function  isNonNegativeInteger (input, returnErrors = false) {
        errors = []; // assume no errors at first
        if(Number(input) != input) errors.push('Not a number!'); // Check if string is a number value
        if(input < 0) errors.push('Negative value!'); // Check if it is non-negative
        if(parseInt(input) != input) errors.push('Not an integer!'); // Check that it is an integer

        if (returnErrors) {
            return errors;
        }
        else if (errors.length == 0) {
            return true;
        }
        else {
            return false;
        }
        };

    function checkQuantityTextbox(the_object) {
        let input_string = the_object.value;
            let error_array = isNonNegativeInteger(input_string, true);
            if (error_array.length == 0) {
                qty_textbox_message.innerHTML = input_string;
            } else {
                qty_textbox_message.innerHTML = error_array.join("; ");
            }
        }


    </script>


</head>
<body>
    
    <header>
        <h1> 
            <script> 
            document.write(store_name+" Candy Store ")
            </script>
        </h1>

    </header>

    
    <div>

        <form name="quantity_form" action="/Purchase" method="POST">
       

        <main>
            
            

        <script>
        /* This code was referenced from the Store 1 WOD and is used to display the products on webpage */
        
            for (i = 0; i < products.length; i++) {
        document.write(`
        <section class ="item">
            <h2>${products[i].brand}</h2>
            <img src="./images/${products[i].image}">
            <p>$${products[i].price}</p>
            <label id="label_description"><B>In Stock : ${products[i].quantity_available}</B></label>
            <br>
            <input type="text" value="" name="quantity${i}" onkeyup="checkQuantityTextbox(this);"></input>
        </section>
        ` );
    };
        </script>
        

        </main>
   
        <center> <span id='qty_textbox_message' style="color: red;"> <strong> Get Something </strong></span> </center>
    <center> <button type="submit" value="Purchase" class="button"> Purchase </button> </center>  
    </div>
    



    <footer>
        
        <h3>
            Best Candy on Oahu!
        </h3>
        <center><p> Fall 2022</p></center>
       
        
    </footer>
</form>
</body>

</html>