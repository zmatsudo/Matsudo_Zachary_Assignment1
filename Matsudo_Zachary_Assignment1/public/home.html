<!DOCTYPE html>
<html>

<head>
    <script src="./product_data.js" type="text/javascript"></script> 
    <meta charset="UTF-8">
    <!-- Template taken from W3 schools-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
    <!-- My own css that I created to adjsut other elements-->
    <link href="style_home.css" rel="stylesheet">
    <title>Smart Phone Store</title>
    <script>
        var store_name = "Zachary Matsudo";

    function  isNonNegativeInteger (input, returnErrors = false) {
        errors = []; // assume no errors at first
        if(Number(input) != input) errors.push('Not a number!'); // Check if string is a number value
        if(input < 0) errors.push('Negative value!'); // Check if it is non-negative
        if(parseInt(input) != input) errors.push('Not an integer!'); // Check that it is an integer

        if (returnErrors) {
            return errors;
        }
        else if (errors.length == 0) {
            return true;
        }
        else {
            return false;
        }
        };

        function checkQuantityTextbox(theTextbox) {
        errs = isNonNegInt(theTextbox.value, true);
        if (errs.length == 0) errs = ['You want:'];
        if (theTextbox.value.trim() == '') errs = ['Quantity'];
        document.getElementById(theTextbox.name + '_label').innerHTML = errs.join(", ");
    }


    </script>


</head>
<body>
    
    <header>
        <h1> 
            <script> 
            document.write(store_name+" Candy Store ")
            </script>
        </h1>

    </header>

    
    <div class="w3-main w3-content w3-padding" style="max-width:1200px;margin-top:100px">

        <form name="quantity_form" action="/Purchase" method="POST">
       

        <main>
            
            

        <script>
        /* This code was referenced from the Store 1 WOD and is used to display the products on webpage */
        
            for (i = 0; i < products.length; i++) {
        document.write(`
        <section class ="item">
            <h2>${products[i].brand}</h2>
            <img src="./images/${products[i].image}">
            <p>$${products[i].price}</p>
            <label id="label_description"><B>In Stock : ${products[i].quantity_available}</B></label>
            <br>
            <input type="text" value="" name="quantity${i}" onkeyup="checkQuantityTextbox(this);"></input>
            <br>
            <span id='qty_textbox_message' style="color: red;"> <strong> Buy Something </strong> </span>
        </section>
        ` );
    };
        </script>
        

        </main>
   
        
    <center> <button type="submit" value="Purchase" class="button"> Purchase </button> </center>  
    </div>
    



    <footer class="w3-row-padding w3-padding-32">
        
        <h3>
            Best Candy on Oahu!
        </h3>
        <center><p> Fall 2022</p></center>
       
        
    </footer>
</form>
</body>

</html>